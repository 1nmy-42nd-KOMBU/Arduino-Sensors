# main
# 大綱
n回PID制御をするのに一回MUXとArduinoの値を取得する

# 並列処理に関して
EV3の並列処理?は処理速度の向上が期待できるものではなく、むしろ低下するものです。
でも、使いどころはあります。

仮にタスクA,Bがあり、ループ処理するとしましょう。
タスクAは周期が長くそこまで頻繁に実行される必要はありません。それに対してタスクBは周期が短くより頻繁に実行される必要があります。

ここでは具体例としてタスクAをライプニッツの公式で初項から第**200**項までの和を求めるタスク、タスクBをライプニッツの公式で初項から第**100**項までの和を求めるタスクとします。当然1回の実行にかかる時間はタスクAのほうが長くなります。
これらをEV3の逐次処理と並列処理で実行された場合を比較します。

## 逐次処理の場合のプログラム
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2449798/06f0e461-366a-0409-8794-ba0cd1e0c6fd.png)
10秒間タスクA,Bをループ処理し、実行回数を最後に表示します。

## 並列処理の場合のプログラム
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2449798/fe5ceb56-2f2d-20c0-7622-503f9a56cbc8.png)

## 結果
|          | タスクA | タスクB | 
| -------- | ------- | ------- | 
| 逐次処理 | 54回      | 54回      | 
| 並列処理 | 37回      | 73回      |  

逐次処理に関しては当然タスクA,Bの実行回数は同様になります。
並列処理に関しては、タスクBの実行回数がタスクAの実行回数の2倍とほぼ理論値が出ています。

## 考察
縦の行を比較すると、タスクAでは並列処理の方が逐次処理よりも実行回数が少ないのに対して、タスクBでは並列処理の方が逐次処理よりも実行回数が多いです。
これを見ると、「タスクAは周期が長くそこまで頻繁に実行される必要はありません。それに対してタスクBは周期が短くより頻繁に実行される必要があります」という条件により当てはまっているのは並列処理だと言えます。

こうなった原因については、EV3の並列処理は複数のタスクを高速に切り替えて同時に実行される並行処理に近い実装になっており、今回の検証ではより周期の長いタスクAの実行中に周期の短いタスクBか複数回ねじ込まれたため実行回数に変化が生じたと解釈しています。